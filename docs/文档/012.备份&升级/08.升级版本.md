---
title: 升级版本
date: 2022-06-11 14:53:07
permalink: /pages/FQA/upgrade/
tags: 
  - 升级
categories: 
  - docs
  - FQA
---

::: danger 注意
升级前请仔细阅读版本更新日志，如果有特殊说明或者注意事项请仔细确认。升级前建议提前做好相关备份,避免出现意外造成数据丢失
:::

## 目前支持的升级方式

1. 手动替换 jar
2. 在线上传 jar 包
3. 远程检查版本并更新
4. 批量升级插件端

升级可能出现启动失败的情况，失败请检查控制台日志

## 在线升级（推荐）

Jpom 中提供在线升级功能，方便用户及时知道有新版本并快速更新。

使用在线升级需要服务器能服务公网的条件才能正常使用

目前更新策略是每天定时更新和手动触发更新

使用该功能可能出现对问题有如下：

1. 无法获取到最新版本
2. 控制台有错误信息（`获取远程版本信息失败: xxxx`）
3. 控制台有错误信息（`获取远程版本信息失败: Received fatal alert: internal_error`）
   1. 通常为 JDK 版本问题，建议升级：`JDK 1.8.0_311+`
   2. 参考文章：[https://blog.csdn.net/qq_36218267/article/details/121741914](https://blog.csdn.net/qq_36218267/article/details/121741914)

### 有新版本提示

![新版本提示](/images/upgrade/261a7e7fcd924989b4371c42f9bb167f.png)


点击下载按钮即可更新

![更新确认](/images/upgrade/4b5f730a6f01433c8a1b4b4ce5273b7a.png)

等待更新完成

## beta 计划

Jpom beta 计划是指能及时使用到 Jpom 最新版本，但是可能存在一些问题，但请不要慌，Jpom 团队会及时修复这些 bug。

欢迎大家参与 beta 计划为 Jpom 提出建议，帮助 Jpom 不断改进，帮忙开源项目更好发展。

![开启beta计划](/images/upgrade/7adc360314964406ac5bdd1e38ba223f.png)

## 批量升级插件端

批量升级插件端是指批量升级插件端，在升级前需要下载最新版本然后选择需要升级的节点

![批量更新插件端](/images/upgrade/beb74d540d1049c8be42ff11cc4733e3.png)

### 手动上传插件端包

![手动上传插件端包](/images/upgrade/7a36bf5b33f547e3b952e80637d7ef16.png)

### 远程下载插件端包

![远程下载插件端包](/images/upgrade/b6c61603d8a24d4abadc687222f9565c.png)


## 上传更新

![上传安装包](/images/upgrade/29a8469119534aaeb06b52594dc73d4c.png)


## 手动替换（不推荐）

先在 Jpom 官方下载最新版本，然后到对应的安装目录移除旧的 jar 包，上传新地安装包

重启：

```shell
bash /xxx/Server.sh restart
```

```shell
bash /xxx/Agent.sh restart
```

```shell
Server.bat restart
```

```shell
Agent.bat restart
```

## 升级数据库？

您有这样的疑问是正常的，但是在 Jpom 中您不需要考虑升级版本时需要升级数据库的操作。

我们为了简化您的升级流程，系统会在升级时自动执行新版本中需要修改的表结构，完全不需要您手动控制。


## 高效看更新日志

更新日志（changelog）我们会在每次发版时候写明对应版本中有哪些功能变动、新增、修复、优化等相关说明。

我们更新日志一般包含：

- 🐣 新增功能
- 🐞 解决BUG、优化功能
- ⚠️ 注意

上述三项，当您看到新版本时候建议先将您还未更新的版本所有的更新日志都阅读一次以便了解变更避免出现找不到功能
您遇到的 BUG 是否修复等小尴尬事件

如果更新日志有注意项时请您一定阅读，说明对应版本有比较大的变动或者需要您手动操作、数据兼容等说明

每条更新日志我们一般开始还表明变动的模块

- 【server】 服务端有变动
- 【agent】 插件端有变动
- 【all】 服务端和插件端均有变动


其实我们建议您服务端和插件端版本保持一致，避免出现一些未知问题（数据字段、接口）

> 我们还会在更新日志中致谢是谁反馈或者提出对应问题，我们衷心感谢您的反馈，您的支持是我们前进的动力

